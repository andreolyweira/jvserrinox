(function(n){n.fn.featureCarousel=function(t){if(this.length>1)return this.each(function(){n(this).featureCarousel(t)}),this;t=n.extend({},n.fn.featureCarousel.defaults,t||{});var i={currentCenterNum:t.startingFeature,containerWidth:0,containerHeight:0,largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:0,smallFeatureHeight:0,totalFeatureCount:n(this).children("div").length,currentlyMoving:!1,featuresContainer:n(this),featuresArray:[],containerIDTag:"#"+n(this).attr("id"),timeoutVar:null,rotationsRemaining:0,itemsToAnimate:0,borderWidth:0},c=function(r){if(t.preload==!0){var u=i.featuresContainer.find("img"),f=0,e=u.length;u.each(function(t,i){var u=new Image;n(u).bind("load error",function(){f++,f==e&&r()}),u.src=i.src})}else r()},f=function(n){return i.featuresArray[n-1]},k=function(t){n.each(i.featuresArray,function(){if(n(this).data().setPosition==t)return n(this)})},u=function(n){return n-1==0?i.totalFeatureCount:n-1},e=function(n){return n+1>i.totalFeatureCount?1:n+1},l=function(){i.containerWidth=i.featuresContainer.width(),i.containerHeight=i.featuresContainer.height();var r=n(i.containerIDTag).find(".carousel-image:first");i.largeFeatureWidth=t.largeFeatureWidth>1?t.largeFeatureWidth:t.largeFeatureWidth>0&&t.largeFeatureWidth<1?r.width()*t.largeFeatureWidth:r.outerWidth(),i.largeFeatureHeight=t.largeFeatureHeight>1?t.largeFeatureHeight:t.largeFeatureHeight>0&&t.largeFeatureHeight<1?r.height()*t.largeFeatureHeight:r.outerHeight(),i.smallFeatureWidth=t.smallFeatureWidth>1?t.smallFeatureWidth:t.smallFeatureWidth>0&&t.smallFeatureWidth<1?r.width()*t.smallFeatureWidth:r.outerWidth()/2,i.smallFeatureHeight=t.smallFeatureHeight>1?t.smallFeatureHeight:t.smallFeatureHeight>0&&t.smallFeatureHeight<1?r.height()*t.smallFeatureHeight:r.outerHeight()/2},a=function(){t.displayCutoff>0&&t.displayCutoff<i.totalFeatureCount&&(i.totalFeatureCount=t.displayCutoff),i.featuresContainer.find(".carousel-feature").each(function(t){t<i.totalFeatureCount&&(i.featuresArray[t]=n(this))}),i.featuresContainer.find(".carousel-feature").first().css("borderLeftWidth")!="medium"&&(i.borderWidth=parseInt(i.featuresContainer.find(".carousel-feature").first().css("borderLeftWidth"))*2),i.featuresContainer.find(".carousel-feature").each(function(){n(this).css({left:i.containerWidth/2-i.smallFeatureWidth/2-i.borderWidth/2,width:i.smallFeatureWidth,height:i.smallFeatureHeight,top:t.smallFeatureOffset+t.topPadding,opacity:0})}).find(".carousel-image").css({width:i.smallFeatureWidth}),t.captionBelow&&i.featuresContainer.find(".carousel-caption").css("position","relative"),i.itemsToAnimate=i.totalFeatureCount<4?i.totalFeatureCount:4,i.featuresContainer.find(".carousel-caption").hide()},v=function(){var e,r,o,s;n.each(i.featuresArray,function(t){n(this).data("setPosition",t+1)}),e=u(t.startingFeature),i.currentCenterNum=e,r=f(e),r.data("position",1),o=r.prevAll(),o.each(function(t){n(this).data("position",i.totalFeatureCount-t)}),s=r.nextAll(),s.each(function(t){n(this).data("setPosition")!=undefined&&n(this).data("position",t+2)}),t.counterStyle=="caption"&&n.each(i.featuresArray,function(){var r=u(n(this).data("position")),t=n("<span><\/span>");t.addClass("numberTag"),t.html("("+r+" de "+i.totalFeatureCount+") "),n(this).find(".carousel-caption p").prepend(t)})},y=function(){var r,u,s,f,e,o;if(t.trackerIndividual){for(r=n("<ul><\/ul>"),r.addClass("tracker-individual-container"),u=0;u<i.totalFeatureCount;u++)s=u+1,f=n("<div>"+s+"<\/div>"),f.addClass("tracker-individual-blip"),f.css("cursor","pointer"),f.attr("id","tracker-"+(u+1)),e=n("<li><\/li>"),e.append(f),e.css("float","left"),e.css("list-style-type","none"),r.append(e);n(i.containerIDTag).append(r),r.hide().show()}if(t.trackerSummation){o=n("<div><\/div>"),o.addClass("tracker-summation-container");var h=n("<span><\/span>").addClass("tracker-summation-current").text(t.startingFeature),c=n("<span><\/span>").addClass("tracker-summation-total").text(i.totalFeatureCount),l=n("<span><\/span>").addClass("tracker-summation-middle").text(" de ");o.append(h).append(l).append(c),n(i.containerIDTag).append(o)}},p=function(n,r){var u;if(t.trackerIndividual){var u=i.featuresContainer.find(".tracker-individual-container"),f=u.find("#tracker-"+n),e=u.find("#tracker-"+r);f.removeClass("tracker-individual-blip-selected"),e.addClass("tracker-individual-blip-selected")}t.trackerSummation&&(u=i.featuresContainer.find(".tracker-summation-container"),u.find(".tracker-summation-current").text(r))},o=function(n){if(clearTimeout(i.timeoutVar),!n&&t.autoPlay!=0){var u=Math.abs(t.autoPlay)<t.carouselSpeed?t.carouselSpeed:Math.abs(t.autoPlay);i.timeoutVar=setTimeout(function(){t.autoPlay>0?r(!0,1):r(!1,1)},u)}},w=function(t){n.each(i.featuresArray,function(){var i;i=t==!1?e(n(this).data().position):u(n(this).data().position),n(this).data("position",i)})},s=function(n,r){var c,l,y,s,b,a,v=n.data("position"),f;f=r==!0?u(v):e(v),v==1&&t.leavingCenter(n),f==1?(c=i.largeFeatureWidth,l=i.largeFeatureHeight,y=t.topPadding,b=n.css("z-index"),s=i.containerWidth/2-i.largeFeatureWidth/2-i.borderWidth/2,a=1):(c=i.smallFeatureWidth,l=i.smallFeatureHeight,y=t.smallFeatureOffset+t.topPadding,b=1,a=.4,f==i.totalFeatureCount?s=t.sidePadding:f==2?s=i.containerWidth-i.smallFeatureWidth-t.sidePadding-i.borderWidth:(s=i.containerWidth/2-i.smallFeatureWidth/2-i.borderWidth/2,a=0)),v==1&&n.find(".carousel-caption").hide(),n.animate({width:c,height:l,top:y,left:s,opacity:a},t.carouselSpeed,t.animationEasing,function(){var s,c,l;f==1&&(t.captionBelow&&n.css("height","auto"),n.find(".carousel-caption").fadeTo("fast",5.85),t.movedToCenter(n)),i.rotationsRemaining=i.rotationsRemaining-1,n.css("z-index",b),(t.trackerIndividual||t.trackerSummation)&&f==1&&(s=i.featuresContainer.find(".carousel-feature").index(n)+1,c=r==!1?e(s):u(s),p(c,s)),l=i.rotationsRemaining/i.itemsToAnimate,l%1==0&&(i.currentlyMoving=!1,w(r),i.rotationsRemaining>0&&h(r)),o(!1)}).find(".carousel-image").animate({width:c,height:l},t.carouselSpeed,t.animationEasing).end()},h=function(n){i.currentlyMoving=!0;var t,r,o,h;n==!0?(t=f(e(i.currentCenterNum)),r=f(i.currentCenterNum),o=f(e(e(i.currentCenterNum))),h=f(u(i.currentCenterNum)),i.currentCenterNum=e(i.currentCenterNum)):(t=f(u(i.currentCenterNum)),r=f(u(u(i.currentCenterNum))),o=f(i.currentCenterNum),h=f(e(i.currentCenterNum)),i.currentCenterNum=u(i.currentCenterNum)),n?r.css("z-index",3):o.css("z-index",3),t.css("z-index",4),s(r,n),s(t,n),s(o,n),i.totalFeatureCount>3&&s(h,n)},r=function(n,t){if(i.currentlyMoving==!1){var r=t*i.itemsToAnimate;i.rotationsRemaining=r,h(n)}},b=function(n,t){for(var r=1,f=1,i=n;(i=u(i))!=t;)r++;for(i=n;(i=e(i))!=t;)f++;return r<f?r*-1:f};return n(t.leftButtonTag).live("click",function(){r(!1,1)}),n(t.rightButtonTag).live("click",function(){r(!0,1)}),i.featuresContainer.find(".carousel-feature").click(function(){var t=n(this).data("position");t==2?r(!0,1):t==i.totalFeatureCount&&r(!1,1)}).mouseover(function(){if(i.currentlyMoving==!1){var r=n(this).data("position");(r==2||r==i.totalFeatureCount)&&n(this).css("opacity",.8)}t.pauseOnHover&&o(!0),t.stopOnHover&&(t.autoPlay=0)}).mouseout(function(){if(i.currentlyMoving==!1){var r=n(this).data("position");(r==2||r==i.totalFeatureCount)&&n(this).css("opacity",.4)}t.pauseOnHover&&o(!1)}),n("a",i.containerIDTag).live("click",function(u){var f=n(this).parentsUntil(i.containerIDTag);f.each(function(){var f=n(this).data("position");if(f!=undefined){if(f!=1)return f==i.totalFeatureCount?r(!1,1):f==2&&r(!0,1),u.preventDefault(),!1;t.clickedCenter(n(this))}})}),n(".tracker-individual-blip",i.containerIDTag).live("click",function(){var u=n(this).attr("id").substring(8),f=i.featuresContainer.find(".carousel-feature").eq(u-1).data("position"),e=i.currentCenterNum,t;u!=e&&(t=b(1,f),t<0?r(!1,t*-1):r(!0,t))}),this.initialize=function(){return c(function(){l(),a(),v(),y(),r(!0,1)}),this},this.next=function(){r(!0,1)},this.prev=function(){r(!1,1)},this.pause=function(){o(!0)},this.start=function(){o(!1)},this.initialize()},n.fn.featureCarousel.defaults={largeFeatureWidth:0,largeFeatureHeight:0,smallFeatureWidth:.5,smallFeatureHeight:.5,topPadding:20,sidePadding:50,smallFeatureOffset:50,startingFeature:1,carouselSpeed:1e3,autoPlay:4e3,pauseOnHover:!0,stopOnHover:!1,trackerIndividual:!0,trackerSummation:!0,preload:!0,displayCutoff:0,animationEasing:"swing",leftButtonTag:"#carousel-left",rightButtonTag:"#carousel-right",captionBelow:!1,movedToCenter:n.noop,leavingCenter:n.noop,clickedCenter:n.noop}})(jQuery);
//@ sourceMappingURL=jquery.featureCarousel.min.js.map